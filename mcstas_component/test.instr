/*******************************************************************************
* Instrument: <instrument name>
*
* %I
* Written by: <your name (email)>
* Date: <current date>
* Origin: <your institution>
* %INSTRUMENT_SITE: Templates
*
* <instrument short description>
*
* %D
* <instrument description>
*
* Example: <parameters=values>
*
* %P
* <parameter1>: [<unit>] <parameter1 description>
* ...
*
* %L
* <reference/HTML link>
*
* %E
*******************************************************************************/
DEFINE INSTRUMENT logspir_test(
    source_width=0.001,
    source_divergence=2,
    L_source=5,
    dL=2,
    flux=1,

    placeholder=0
)

DECLARE
%{
%}

INITIALIZE
%{
%}

TRACE

COMPONENT origin = Progress_bar()
AT (0, 0, 0) RELATIVE ABSOLUTE

// insert components here (e.g. Insert -> Source -> ...)
COMPONENT source = Arm()
AT (0, 0, 0) RELATIVE PREVIOUS

COMPONENT source_div = Source_div(
    yheight=source_width,
    xwidth=source_width,
    //dist=3,
    focus_aw=source_divergence,//source_divergence,//maximum divergence horizontal0.000000001,//
    focus_ah=source_divergence,//guide_width,0.000000001,//
    lambda0=L_source,
    flux=flux,
    dlambda=dL)
AT (0, 0, 0) RELATIVE source

COMPONENT slit = Slit(
    radius=source_width/2
)
AT (0, 0, 0) RELATIVE source

COMPONENT logspir = LogSpiral()
AT (0, 0, 0) RELATIVE source


FINALLY
%{
%}

END